{% extends "base.html" %}

{% block title %}Common ESO Builds - Home{% endblock %}

{% block content %}
<div class="card">
    <h2>ESO Trials</h2>
    <p style="margin-bottom: 20px; color: #a8edea;">
        Select a trial to view boss-specific builds selected from top-scoring reports
    </p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
        {% for trial in trials %}
        <a href="{{ trial.slug }}.html" style="text-decoration: none;">
            <div style="background: linear-gradient(135deg, rgba(56, 239, 125, 0.1) 0%, rgba(17, 153, 142, 0.1) 100%); 
                        padding: 20px; 
                        border-radius: 12px; 
                        border: 1px solid rgba(56, 239, 125, 0.3);
                        transition: all 0.3s ease;
                        cursor: pointer;"
                 onmouseover="this.style.borderColor='rgba(56, 239, 125, 0.6)'; this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 20px rgba(56, 239, 125, 0.3)';"
                 onmouseout="this.style.borderColor='rgba(56, 239, 125, 0.3)'; this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                
                <h3 style="color: #38ef7d; margin-bottom: 15px;">{{ trial.name }}</h3>
                
                {% if trial.top_build %}
                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="font-size: 0.9em; color: #a8edea; margin-bottom: 5px;">Highest DPS Build:</div>
                    <div style="font-weight: 600; color: #fff;">{{ trial.top_build.get_display_name() }}</div>
                    <div style="font-size: 0.85em; color: #a8edea; margin-top: 5px;">{{ trial.top_build.boss_name }}</div>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9em;">
                        <span style="color: #a8edea;">{{ trial.top_build.best_player.player_name }} - {{ trial.top_build.best_player.character_name }}</span>
                        <span style="color: #38ef7d; font-weight: 600;">{{ trial.top_build.best_player.dps|format_dps }}</span>
                    </div>
                    {% if trial.cache_stats %}
                    <div style="margin-top: 8px; font-size: 0.7em; color: #666; text-align: center;">
                        Cache effectiveness: API calls obviated by cache: {{ trial.cache_stats.cache_hits }}. Hitting Esologs.com: {{ trial.cache_stats.cache_misses }}
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </a>
        {% endfor %}
    </div>
</div>

<div class="card">
    <h3>About This Data</h3>
    <p style="line-height: 1.8;">
        This page shows the most popular builds from the top 5 ranked logs for each trial boss. 
        A build is considered "common" and featured here if it appears 2 or more times among top players.
    </p>
    <p style="margin-top: 15px; line-height: 1.8;">
        <strong>Build Definition:</strong> A unique combination of subclasses (skill lines) and two 5-piece gear sets.
    </p>
    <p style="margin-top: 15px; line-height: 1.8;">
        <strong>Data Source:</strong> ESO Logs public rankings, automatically scanned weekly.
    </p>
</div>
{% endblock %}
